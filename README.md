# Private Messenger (E2EE Draft)

## üõ°Ô∏è‚ú® –ß—Ç–æ —É–º–µ–µ—Ç
- –°–∫–≤–æ–∑–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (–∫–æ–Ω—Ç–µ–Ω—Ç + –≤–ª–æ–∂–µ–Ω–∏—è) —Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∫–ª—é—á–µ–π.
- P2P/WebRTC –∫–∞–Ω–∞–ª –¥–ª—è –º–µ–¥–∏–∞, —Å fallback —á–µ—Ä–µ–∑ TURN.
- –¢–∞–π–º–µ—Ä—ã —Å–∞–º–æ—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ retension.

## üß† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Backend: FastAPI, WebSockets, WebRTC —Å–∏–≥–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.
- Crypto: libsodium/pyNaCl (X3DH-like —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ, double ratchet).
- Storage: Postgres + S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –æ–±—ä–µ–∫—Ç–Ω—ã–π —Å—Ç–æ—Ä –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏–π.

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `api/` ‚Äî REST/WebSocket, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –≤—ã–¥–∞—á–∞ TURN creds.
- `crypto/` ‚Äî –∫–ª—é—á–∏, ratchet-—Å–µ—Å—Å–∏–∏, –ø–æ–¥–ø–∏—Å–∏.
- `messaging/` ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, –æ—á–µ—Ä–µ–¥–∏, –∫–≤–æ—Ç—ã.
- `clients/` ‚Äî SPA/desktop stub –¥–ª—è P2P —Å —Å–∏–≥–Ω–∞–ª–∏–Ω–≥–æ–º.

## üñºÔ∏è –î–µ–º–æ
- –°—Ü–µ–Ω–∞—Ä–∏–π: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –æ–±–º–µ–Ω QR/PIN ‚Üí —á–∞—Ç ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º.

## üß≠ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ENV: `DATABASE_URL`, `S3_ENDPOINT`, `S3_ACCESS_KEY`, `S3_SECRET_KEY`, `TURN_SECRET`, `JWT_SECRET`, `ALLOWED_ORIGINS`.
- Secrets —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `.env`/vault, –±–µ–∑ –∫–æ–º–º–∏—Ç–æ–≤.

## üõ°Ô∏è –¢–µ—Å—Ç—ã
- –Æ–Ω–∏—Ç—ã: –∫—Ä–∏–ø—Ç–æ-–ø–æ—Ç–æ–∫–∏, —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–µ–π, TTL —Å–æ–æ–±—â–µ–Ω–∏–π.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: —Å–∏–≥–Ω–∞–ª–∏–Ω–≥ + —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ WebRTC, e2e –æ–±–º–µ–Ω —Ñ–∞–π–ª–∞–º–∏.

## üöÄ Roadmap
- ‚ö°Ô∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤ –∏ —Ä–µ–∞–∫—Ü–∏–π.
- üõ∞Ô∏è Desktop/PWA-–∫–ª–∏–µ–Ω—Ç —Å –æ—Ñ–ª–∞–π–Ω-–∫–µ—à–µ–º.
- üîß Rotation –∫–ª—é—á–µ–π –∏ —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç —Å–µ–π—Ñ–∞.
